<!DOCTYPE html>
<head>
	<link rel="stylesheet" href="./public/bootstrap.min.css">
	<link rel="stylesheet" href="./public/main.css">
	<script src="./public/jquery.min.js"></script>
	<script src="./public/bootstrap.min.js"></script>
	<script src="./public/d3.min.js"></script>
	<script type="text/javascript" src="../public/fusioncharts.js"></script>
		<script type="text/javascript" src="../public/fusioncharts-jquery-plugin.js"></script>

	    <script type="text/javascript" src="http://static.fusioncharts.com/code/latest/fusioncharts.charts.js?cacheBust=8232"></script>
	    <!-- <script type="text/javascript" src="js/fusioncharts.jqueryplugin.js"></script> -->

	    <script type="text/javascript" src="http://static.fusioncharts.com/code/latest/themes/fusioncharts.theme.zune.js?cacheBust=8232"></script>
	<script src="./public/main.js"></script>
	<script type="text/javascript">


		function returndepartmentdata(){
			console.log("jump to return")
			var query=JSON.stringify({
				"GET":"courses_dept",
				"WHERE":{},
				"GROUP":["courses_dept"],
				"APPLY":[],
				"ORDER":"courses_dept",
				"AS":"TABLE"
			})
            return $.ajax("/query", {type:"POST",
				data: query, contentType: "application/json", dataType: "json"
			}
			);
		}

		function returntitledata(){
			console.log("jump to return")
			var query=JSON.stringify({
				"GET":"courses_title",
				"WHERE":{},
				"GROUP":["courses_title"],
				"APPLY":[],
				"ORDER":"courses_title",
				"AS":"TABLE"
			})
			return $.ajax("/query", {type:"POST",
						data: query, contentType: "application/json", dataType: "json"
					}
			);
		}

		function returnbuildingnamedata(){
			console.log("jump to return")
			var query=JSON.stringify({
				"GET":"rooms_shortname",
				"WHERE":{},
				"GROUP":["rooms_shortname"],
				"APPLY":[],
				"ORDER":"rooms_shortname",
				"AS":"TABLE"
			})
			return $.ajax("/query", {type:"POST",
						data: query, contentType: "application/json", dataType: "json"
					}
			);
		}
		function returncoursenamedata(){
			console.log("jump to return")
			var query=JSON.stringify({
				"GET":"courses_name",
				"WHERE":{},
				"GROUP":["courses_name"],
				"APPLY":[],
				"ORDER":"courses_name",
				"AS":"TABLE"
			})
			return $.ajax("/query", {type:"POST",
						data: query, contentType: "application/json", dataType: "json"
					}
			);
		}

		function dropdownbuildingfunction(data)
		{
			//console.log(jsonData.Table)
			var jsonData={};
			jsonData.Table=[]
			jsonData.Table=data["result"]
			console.log(jsonData.Table)
			var listItems = '<option selected="selected" value=" ">- Select -</option>';

			for (var i = 0; i < jsonData.Table.length; i++) {
				listItems += "<option value='" + jsonData.Table[i].rooms_shortname+ "'>" + jsonData.Table[i].rooms_shortname + "</option>";
			}

			$("#buildingname").html(listItems)
			$("#buildingname1").html(listItems)
			$("#buildingname2").html(listItems)
			$("#buildingchart").html(listItems)

		}
		
		function dropdowndeptfunction(data)
		{
			//console.log(jsonData.Table)
			var jsonData={};
			jsonData.Table=[]
			jsonData.Table=data["result"]
			console.log(jsonData.Table)
			var listItems = '<option selected="selected" value=" ">- Select -</option>';

			for (var i = 0; i < jsonData.Table.length; i++) {
				listItems += "<option value='" + jsonData.Table[i].courses_dept + "'>" + jsonData.Table[i].courses_dept + "</option>";
			}

			$("#department").html(listItems)
			$("#coursedept").html(listItems)
			$("#departmentchart").html(listItems)

		}

		function dropdowncoursenamefunction(data)
		{
			//console.log(jsonData.Table)
			var jsonData={};
			jsonData.Table=[]
			jsonData.Table=data["result"]
			console.log(jsonData.Table)
			var listItems = '<option selected="selected" value=" ">- Select -</option>';

			for (var i = 0; i < jsonData.Table.length; i++) {
				listItems += "<option value='" + jsonData.Table[i].courses_name + "'>" + jsonData.Table[i].courses_name  + "</option>";
			}
			$("#coursechart").html(listItems)


		}
		function dropdowntitlefunction(data)
		{
			//console.log(jsonData.Table)
			var jsonData={};
			jsonData.Table=[]
			jsonData.Table=data["result"]
			console.log(jsonData.Table)
			var listItems = '<option selected="selected" value=" ">- Select -</option>';

			for (var i = 0; i < jsonData.Table.length; i++) {
				listItems += "<option value='" + jsonData.Table[i].courses_title + "'>" + jsonData.Table[i].courses_title  + "</option>";
			}
			$("#title").html(listItems)


		}

		$.when(returndepartmentdata()).then
		(dropdowndeptfunction)
		$.when(returnbuildingnamedata()).then
		(dropdownbuildingfunction)
		//$.when(returncoursenamedata()).then
		//(dropdowncoursenamefunction)
		$.when(returntitledata()).then
		(dropdowntitlefunction)
		</script>
<title>
	UBC Insight
	</title>
</head>
<html>
<body>
<header id="headtitle" size="50px"> UBC Insight</header>
<div id="dataset">
	<div class="form-group">
		<h3>Dataset</h3>
		<label for="datasetId">ID:</label>
		<input type="text" class="form-control" id="datasetId">
		<label for="datasetZip">Archive:</label>
		<input type="file" class="form-control" id="datasetZip">
	</div>
	<button type="button" class="btn btn-primary" id="datasetAdd">Add Dataset</button>
	<button type="button" class="btn btn-primary" id="datasetRm">Remove Dataset</button>
</div>

<div id="container">
	<h3>Courses Explorer</h3>
	<form id="queryForm">
		<div class="form-group">
			<label for="department">Department:</label>
			<select id="department"></select>
			<div class="form-group">
				<label>Choosing Compare Key</label>
				<input type="checkbox" name="getcoursebydept" value="courses_pass" > Courses Pass</input>
				<input type="checkbox" name="getcoursebydept" value="courses_fail" > Courses Failing</input>
				<input type="checkbox" name="getcoursebydept" value="courses_avg" > Courses avg</input>
			</div>
			<label for="coursenumber">Course number:</label>
			<textarea class="form-control" rows="1" id="coursenumber"></textarea>
			<h4>    </h4>
			<label for="instructor">Instructor:</label>
		<!--	<select id="instructor"></select>  !-->
			<textarea class="form-control" rows="1" id="instructor"></textarea>
			<label for="sectionsize">Section size:</label>
			<select id="sectionsizecompare">
				<option value="GT"> > </option>
				<option  value="EQ" > = </option>
				<option  value="LT" > < </option>
			</select>    <br>
			<textarea class="form-control" rows="1" id="sectionsize"></textarea>
			<label for="title">Title:</label><br>
			<select id="title"></select>
			<!--
			<textarea class="form-control" rows="1" id="title"></textarea>
!-->
		</div>

        <div class="form-group">
            <!--  order    多选 !-->
            <label >Compare direction:</label>
            <select id="direction0">
                <option value="UP"> UP </option>
                <option value="DOWN"> DOWN </option>
            </select>    <br>

        </div>

		<div class="form-group">
            <label>Course Filter</label>
            <input type="checkbox" name="getcourse" value= "courses_dept" > Department</input>
            <input type="checkbox" name="getcourse" value="courses_title" > Title</input>
            <input type="checkbox" name="getcourse" value="courses_size" > Section Size </input><br>

			<label>Section Filter</label>
			<input type="checkbox" name="getcourse" value= "courses_dept" > Department</input>
			<input type="checkbox" name="getcourse" value="courses_instructor" >Instructor </input>
			<input type="checkbox" name="getcourse" value="courses_id" > Course Number</input>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
	</form>



</div>


<div id="container1">
	<h3>Rooms Explorer</h3>
	<form id="queryForm1">
		<!--  filter !-->
		<div class="form-group">
			<label for="buildingname">Building Name:</label>
			<select id="buildingname"></select><br>
		<!--
				<textarea class="form-control" rows="1" id="buildingname"></textarea>
				!-->
			<label for="roomnumber">Room Number:</label>
			<textarea class="form-control" rows="1" id="roomnumber"></textarea>
			<label for="roomsize">Room Size:</label>
			<select id="roomsizecompare">
				<option value="GT" > > </option>
				<option value="EQ"> = </option>
				<option value="LT"> < </option>
			</select>    <br>
			<textarea class="form-control" rows="1" id="roomsize"></textarea>
			<label for="roomtype">Room Type:</label>
			<textarea class="form-control" rows="1" id="roomtype"></textarea>
			<label for="furnituretype">Furniture type:</label>
			<textarea class="form-control" rows="1" id="furnituretype"></textarea>
			<h4>Location:</h4>
			<label for="buildingname1"> building name</label>
			<select id="buildingname1"></select><br>
			<!--
			<textarea class="form-control" rows="1" id="buildingname1"></textarea>
			!-->
			<label for="roomdistance"> distance (meters)</label>
			<textarea class="form-control" rows="1" id="roomdistance"></textarea>

		</div>

		<div class="form-group">
			<!--  order    多选 !-->
			<label >Compare direction:</label>
			<select id="direction1">
				<option> UP </option>
				<option> DOWN </option>
			</select>    <br>
			<!--  order    多选 !-->

		</div>

		<div class="form-group">
			<label>Choosing Filter</label>
			<input type="checkbox" name="getroomfilter" value= "rooms_shortname" > Building Name</input><br>
			<input type="checkbox" name="getroomfilter" value="rooms_seats" > Room Size </input>
			<input type="checkbox" name="getroomfilter" value="rooms_type" > Room type </input>
			<input type="checkbox" name="getroomfilter" value="rooms_furniture" > Furniture Type </input>
			<input type="checkbox" name="getroomfilter" value="roomsdistance" > Distance</input>
		</div>


		<button type="submit" class="btn btn-primary">Submit</button>
	</form>
</div>

<div id="roomscheduling">
<h3> Room Scheduling</h3>
<form id="schedulingform">
	<label>typing list of input</label>
	<label> Room List</label>
	<textarea class="form-control" rows="1" id="roomlist" > </textarea>
	<label> Course List</label>
	<textarea class="form-control" rows="1" id="courselist"> </textarea>
	<label>filter by keyword</label><br>
	<label> department</label>
	<select id="coursedept"></select><br>
	<!--
	<textarea class="form-control" rows="3" id="coursedept" > </textarea>
	!-->
	<label> building name</label>
	<select id="buildingname2"></select><br>
	<!--
	<textarea class="form-control" rows="3" id="buildingname2"> </textarea>
!-->
	<button type="submit" class="btn btn-primary">Submit</button>
	</form>
</div>




<div id="novelfunction">
	<h3> render charts for useful data</h3>
	<form id="datagathering">
		<h4> Department Info</h4>
		<label> choose department</label><br>
		<select id="departmentchart"></select><br>
		<!--
		<textarea class="form-control" rows="1" id="departmentchart" > </textarea>
		!-->
		<select id="coursechooses">
			<option  value="course" >group by course</option>
			<option  value="instructor"> group by instructor  </option>
		</select><br>
		<label> choose course(coursename)</label><br>
		<!--
    <select id="coursechart"></select><br>
    !-->
    <textarea class="form-control" rows="0.5" id="coursechart" > </textarea>

		<h4> Room Info</h4>
		<label> choose builing</label><br>
		<select id="buildingchart"></select><br>
		<!--
		<textarea class="form-control" rows="1" id="buildingchart" > </textarea>
		!-->
		<select id="typechooses">
			<option  value="roomtype" >show room type</option>
			<option  value="roomfurniture"> show furniture type  </option>
		</select><br>
		<button type="submit" class="btn btn-primary">Submit</button>
	</form>
</div>

<div id="render">
	<h3>Result</h3>
</div>
<div class="modal fade" id="errorModal" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title"></h4>
			</div>
			<div class="modal-body">
				<p></p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<div id="chart-container">
	render chart here
	</div>




</body>
</html>
